
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lại là stream processing, nhưng lần này nó chỉ cần chạy vài cli cơ bản..">
      
      
        <meta name="author" content="Andy Hoang">
      
      
        <link rel="canonical" href="https://andyhoang.github.io/blog/2023-04-02-you-are-already-doing-streaming-application/">
      
      
        <link rel="prev" href="../2023-03-03-when-no-mean-yes/">
      
      
        <link rel="next" href="../../poet/2023-02-26-hoa-roi-nuoc-chay/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.0.15">
    
    
      
        <title>Bạn đã luôn 'xài' stream processing - My Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.113286f1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-6ZRYGDENRB"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-6ZRYGDENRB",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-6ZRYGDENRB",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#stream-processing-101" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="My Blog" class="md-header__button md-logo" aria-label="My Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bạn đã luôn 'xài' stream processing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/AndyHoang/AndyHoang.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../2017-03-19-60-minutes-setting-up-my-first-blog/" class="md-tabs__link md-tabs__link--active">
        Blog
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../poet/2023-02-26-hoa-roi-nuoc-chay/" class="md-tabs__link">
        Poet
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="My Blog" class="md-nav__button md-logo" aria-label="My Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    My Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AndyHoang/AndyHoang.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2017-03-19-60-minutes-setting-up-my-first-blog/" class="md-nav__link">
        60 minutes setting up my first blog!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2023-03-03-when-no-mean-yes/" class="md-nav__link">
        When Yes means NO...
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Bạn đã luôn 'xài' stream processing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Bạn đã luôn 'xài' stream processing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stream-processing-101" class="md-nav__link">
    Stream processing 101
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mot-chut-context-ve-functional-programming" class="md-nav__link">
    Một chút context về Functional Programming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipe-nhu-la-mot-streaming-co-ban" class="md-nav__link">
    Pipe (|) như là một streaming cơ bản
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stream-processing-101_1" class="md-nav__link">
    Stream processing 101
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#my-thought" class="md-nav__link">
    My thought
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Poet
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Poet
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../poet/2023-02-26-hoa-roi-nuoc-chay/" class="md-nav__link">
        Hoa rơi Nước chảy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../poet/2023-03-03-ben-nuoc-thuyen-xua/" class="md-nav__link">
        Bến nước thuyền xưa
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stream-processing-101" class="md-nav__link">
    Stream processing 101
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mot-chut-context-ve-functional-programming" class="md-nav__link">
    Một chút context về Functional Programming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipe-nhu-la-mot-streaming-co-ban" class="md-nav__link">
    Pipe (|) như là một streaming cơ bản
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stream-processing-101_1" class="md-nav__link">
    Stream processing 101
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#my-thought" class="md-nav__link">
    My thought
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Bạn đã luôn 'xài' stream processing</h1>

<h2 id="stream-processing-101">Stream processing <del>101</del><a class="headerlink" href="#stream-processing-101" title="Permanent link">#</a></h2>
<p>Không quá khó để nhờ ChatGPT hay Notion AI, hay bất kì cái gì để có một định nghĩa từ hàn lâm đến dễ hiểu cho nó, đơn cử</p>
<blockquote>
<p>Xử lý luồng là một cách tuyệt vời để xử lý dữ liệu trong thời gian thực ngay khi nó được tạo ra. Điều này có nghĩa là dữ liệu được xử lý và gửi đến người dùng cuối ngay lập tức. Điều này khác với xử lý <del>theo lô</del> bulk processing, trong đó dữ liệu được xử lý theo các <del>lô</del> bulk tại các khoảng thời gian được <del>lên lịch</del> schedule.</p>
</blockquote>
<p>Tuy nhiên để &ldquo;làm việc&rdquo; với môn này thường các sếp sẽ bàn giao cho bạn 1 lô sách &ldquo;how to&rdquo; từ cookbook cho tới chuyên sâu để có thể làm &ldquo;đúng&rdquo; 1 chương trình streaming processing.
Một vài tựa sách mà các đàn anh thường hay giới thiệu có lẽ là</p>
<ul>
<li>
<p><a href="https://www.oreilly.com/library/view/stream-processing-with/9781491974285/">Stream Processing with Apache Flink</a></p>
</li>
<li>
<p><a href="https://www.oreilly.com/library/view/designing-data-intensive-applications/9781491903063/">Designing Data-Intensive Applications</a></p>
</li>
<li>
<p>Giới thiệu mình với&hellip;</p>
</li>
</ul>
<h2 id="mot-chut-context-ve-functional-programming">Một chút context về Functional Programming<a class="headerlink" href="#mot-chut-context-ve-functional-programming" title="Permanent link">#</a></h2>
<p>Thường thì chúng ta nhắc đến <code>map</code>, <code>flatmap</code>, <code>filter</code>, <code>reduce</code> ở một vài ngôn ngữ như js, python, java, scala như là mốt sự &ldquo;hiện hữu&rdquo; của Functional Programming trong Mindset của Developer. Chẳng qua chưa có hội, điều kiện &ldquo;all in&rdquo; mà thôi.</p>
<p>Nó có phần đúng và cũng có phần sai, nhưng mà khoan, tại sao chúng ta lại nhắc về FP nhỉ?</p>
<p>Thường những &ldquo;phép biến đổi stateless&rdquo; của FP được dùng khá nhiều trong các &ldquo;operator&rdquo; của stream procesing có lẽ là mối liên quan duy nhất mà người viết nhìn thấy được, ta tạm để việc này lại ở đây đã.</p>
<h2 id="pipe-nhu-la-mot-streaming-co-ban">Pipe (|) như là một streaming cơ bản<a class="headerlink" href="#pipe-nhu-la-mot-streaming-co-ban" title="Permanent link">#</a></h2>
<p>(|) được dùng từ khá lâu, nhất là các bạn choi choi thời 8x-9x mới đầu chơi emoji bậy mà k cần yahoo support vậy. Tuy nhiên lịch sử của nó thì khá xa so với thời kì này, ai muốn search thêm thì nhờ mấy bạn AI giúp. Bài viết này tập trung vào mối quan hệ của cái (|) và Title của chúng ta</p>
<p><code>ls | xargs rm</code> là một hành động thường có kết quả không tốt cho HĐH của bạn tuy nhiên bạn vừa mới hoàn thành xong một chương trình khá xịn sò, đó là</p>
<ul>
<li>
<p>list tất cả các file folder trong directory</p>
</li>
<li>
<p>xoá nó với <code>rm</code> và sử dụng thêm 1 từ hơi lạ <code>xargs</code></p>
</li>
</ul>
<p>Chương trình ta vừa viết cũng không hẵn lúc nào cũng chạy đúng cả, vì đơn giản phần sau cái (|) sẽ &ldquo;chừa&rdquo; folder lại, vì rờ mờ mà không rờ ép thì không xoá được folder.</p>
<p>Khoan đã, vậy chương trình mình vừa viết có phải là 1 streaming procesing application không?</p>
<blockquote>
<p>Không&hellip; hẵn</p>
</blockquote>
<p>ChatGpt đã giúp mình tạo ra 1 server log dạng này</p>
<blockquote>
<p><code>server.log</code>
<div class="highlight"><pre><span></span><code>[2021-09-22 11:09:10] INFO: Starting server...
[2021-09-22 11:09:28] INFO: Server successfully started and listening on port 8080
[2021-09-22 11:10:12] DEBUG: Received GET request from 127.0.0.1 with status code 200
[2021-09-22 11:12:56] DEBUG: Received POST request from 127.0.0.1 with status code 503
[2021-09-22 11:13:01] DEBUG: Received GET request from 127.0.0.1 with status code 404
[2021-09-22 11:15:38] DEBUG: Received GET request from 127.0.0.1 with status code 200
[2021-09-22 11:20:49] DEBUG: Received POST request from 127.0.0.1 with status code 200
[2021-09-22 11:25:12] DEBUG: Received GET request from 127.0.0.1 with status code 200
[2021-09-22 11:30:35] DEBUG: Received GET request from 127.0.0.1 with status code 404
[2021-09-22 11:35:47] DEBUG: Received POST request from 127.0.0.1 with status code 200
[2021-09-22 11:40:22] DEBUG: Received GET request from 127.0.0.1 with status code 200
[2021-09-22 11:43:59] DEBUG: Received GET request from 127.0.0.1 with status code 503
[2021-09-22 11:45:22] INFO: Stopping server for backups
</code></pre></div></p>
</blockquote>
<p>Có bao nhiêu request trả về status_code 200?
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>server.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</code></pre></div></p>
<p><code>cat, grep, wc</code> đều là những cli cơ bản mà hầu như lập trình viên nào cũng dùng qua, và nó có 1 đặc tính là hầu như stateless (à trừ <code>sudo rm -rf  --no-preserve-root /</code> ra). Khi bạn &ldquo;compose&rdquo; chúng lại bằng những compatible input/output bạn sẽ được 1 câu &ldquo;cli cool ngầu hơn&rdquo; và phục vụ được nhiều mục đích hơn.</p>
<p>Đổi lại bài toán trên 1 chút, với 1 file server.log đang chạy  ở 1 con máy chủ nào đó, với nhiều tmux panel được mở:</p>
<p><div class="highlight"><pre><span></span><code>tail<span class="w"> </span>-f<span class="w"> </span>server.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">200</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>server_200.log

tail<span class="w"> </span>-f<span class="w"> </span>server.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">500</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>server_500.log

watch<span class="w"> </span><span class="s2">&quot;wc -l server_200.log&quot;</span>
watch<span class="w"> </span><span class="s2">&quot;wc -l server_500.log&quot;</span>
</code></pre></div>
Bạn có thể cơ bản được cập nhật &ldquo;real-time&rdquo; tổng số lỗi 200/500 mà con server đang gặp phải. Tất nhiên trường hợp này quá ư là thừa, khi mà toàn bộ log server ngày nay đã được đưa vào kibana, graphana để vẽ chart nhìn sướng con mắt.</p>
<p>Một số trường hợp dùng nâng cao hơn về CLI sử dụng &ldquo;tail&rdquo; để mở đầu, và kết thúc là 1 stdout cũng rất phổ biến trong quá trình debug nhanh hệ thống.</p>
<blockquote>
<p><code>server.log</code>
<div class="highlight"><pre><span></span><code>{&quot;log_timestamp&quot;: &quot;2021-09-22 13:15:27.000&quot;, &quot;request&quot;: &quot;/&quot;, &quot;body_bytes_sent&quot;: 1024, &quot;ip&quot;: &quot;192.168.0.1&quot;, &quot;thread&quot;: &quot;T-1000&quot;}
{&quot;log_timestamp&quot;: &quot;2021-09-22 13:15:32.000&quot;, &quot;request&quot;: &quot;/login&quot;, &quot;body_bytes_sent&quot;: 1987, &quot;ip&quot;: &quot;192.168.0.2&quot;, &quot;thread&quot;: &quot;T-1001&quot;}
{&quot;log_timestamp&quot;: &quot;2021-09-22 13:15:34.000&quot;, &quot;request&quot;: &quot;/home.html&quot;, &quot;body_bytes_sent&quot;: 3056, &quot;ip&quot;: &quot;192.168.0.3&quot;, &quot;thread&quot;: &quot;T-1003&quot;}
{&quot;log_timestamp&quot;: &quot;2021-09-22 13:16:01.000&quot;, &quot;request&quot;: &quot;/api/v1/products&quot;, &quot;body_bytes_sent&quot;: 4096, &quot;ip&quot;: &quot;192.168.0.4&quot;, &quot;thread&quot;: &quot;T-1004&quot;}
{&quot;log_timestamp&quot;: &quot;2021-09-22 13:16:10.000&quot;, &quot;request&quot;: &quot;/about.html&quot;, &quot;body_bytes_sent&quot;: 1234, &quot;ip&quot;: &quot;192.168.0.5&quot;, &quot;thread&quot;: &quot;T-1005&quot;}
</code></pre></div></p>
</blockquote>
<div class="highlight"><pre><span></span><code>tail -f server.log | grep --line-buffered  thread | sed -r &#39;s/^.*log_timestamp\&quot;: \&quot;([^,]*)\&quot;,.*request\&quot;: \&quot;([^,]*)\&quot;.*body_bytes_sent\&quot;: ([^,]*),.*$/\1 \3 \2/&#39;
</code></pre></div>
<div class="highlight"><pre><span></span><code>2021-09-22 13:15:27.000 1024 /
2021-09-22 13:15:32.000 1987 /login
2021-09-22 13:15:34.000 3056 /home.html
2021-09-22 13:16:01.000 4096 /api/v1/products
2021-09-22 13:16:10.000 1234 /about.html
</code></pre></div>
<h2 id="stream-processing-101_1">Stream processing 101<a class="headerlink" href="#stream-processing-101_1" title="Permanent link">#</a></h2>
<p>Tóm lại, với những chương trình &ldquo;nhỏ&rdquo;, &ldquo;cơ bản&rdquo; bạn có thể gộp nó lại thành 1 chương trình to hơn, hoành tráng hơn rât nhiều, và <strong>stream processing</strong> cũng thế, với những element cơ bản:</p>
<ul>
<li>source (tail? nc? kafka?)</li>
<li>transformation (grep? uniq? sort? map? filter? aggregate? reduce?)</li>
<li>sink (stdout? file? kafka? database connector?)</li>
</ul>
<blockquote>
<p><strong>Nếu bạn đã và đang làm việc với (|) thì bạn xem như hoàn thành stream processing 101 rồi!</strong></p>
</blockquote>
<p>Hãy sẵn với bài toán nhập môn của <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/datastream/overview/#anatomy-of-a-flink-program">Flink</a> nhé!</p>
<h2 id="my-thought">My thought<a class="headerlink" href="#my-thought" title="Permanent link">#</a></h2>
<p>Cám ơn <a href="https://www.oreilly.com/library/view/making-sense-of/9781492042563/">Making Sense of Stream Processing - Chapter 4</a>, <code>The Unix Philosophy of Distributed Data</code> đã tạo cảm hứng cho mình viết bài này, phần lớn ý tưởng của bài blog được tạo ra ở đây</p>
<p>Phần còn lại là nhờ ChatGPT viết ví dụ.</p>
<p>Với mình thì đâu đó Functional Programming vẫn 1 cái gì đó đóng góp vào Mindset đồ chơi lập trình real-time này, còn các bạn thì sao?</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-09-07</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-09-07</span>
      
    
  </small>
</div>


  



  
	<h2 id="__comments">Comments</h2>
	
<script src="https://utteranc.es/client.js"
        repo="AndyHoang/AndyHoang.github.io"
        issue-term="pathname"
        label="blog-comments"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</script>
	

	<!-- Reload on palette change -->
	<script>
	var palette = __md_get("__palette")
	if (palette && typeof palette.color === "object")
	  if (palette.color.scheme === "slate") {
	  	
	    	var utterances = document.querySelector("script[src*=utteranc]")
	    	utterances.setAttribute("theme", "github-dark")
	    
	  }

	/* Register event handlers after documented loaded */
	document.addEventListener("DOMContentLoaded", function() {
	  var ref = document.querySelector("[data-md-component=palette]")
	  ref.addEventListener("change", function() {
	    var palette = __md_get("__palette")
	    if (palette && typeof palette.color === "object") {
	      var theme = palette.color.scheme === "slate" ? "dark" : "light"
	    
	      /* Instruct Utterances to change theme */
	      var frame = document.querySelector(".utterances-frame")
	      frame.contentWindow.postMessage(
	        { utterances: { setConfig: { theme } } },
	        "https://utteranc.es"
	      )
	    
	    }
	  })
	})
	</script>
  
                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.annotate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
      
        <script src="https://utteranc.es/client.js"></script>
      
    
  </body>
</html>